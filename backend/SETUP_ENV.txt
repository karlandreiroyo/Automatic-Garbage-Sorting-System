INSTRUCTIONS TO CREATE .env FILE:

LOCAL DEVELOPMENT: Create backend/.env and add the variables below.

RAILWAY (and other hosts): .env in your repo is often not used in production.
  → Go to Railway Dashboard → Your backend service → Variables (or Environment).
  → Add each variable below there. Redeploy after adding SUPABASE_SERVICE_KEY and SMTP vars.
  → Without SUPABASE_SERVICE_KEY the backend cannot read users; login/verification will fail with errors.

1. In the 'backend' folder, create a new file named exactly: .env
   (Make sure it starts with a dot: .env not env.txt)

2. Copy and paste this content into the .env file:

SUPABASE_SERVICE_KEY=your_service_role_key_here
PORT=3001
NODE_ENV=development

3. Replace 'your_service_role_key_here' with your actual Service Role Key:
   - Go to: https://supabase.com/dashboard
   - Select your project
   - Go to: Settings > API
   - Copy the "service_role" key (the long secret key)
   - Paste it in place of 'your_service_role_key_here'

4. Save the file

5. Restart the backend server:
   npm start

---
EMAIL VERIFICATION — choose one option.

Option A: Brevo (recommended for Railway / Brave)
   Add to backend/.env:

SMTP_HOST=smtp-relay.brevo.com
SMTP_PORT=587
SMTP_USER=your_brevo_account_email@example.com
SMTP_PASS=xkeysib-YOUR_BREVO_API_KEY_HERE
SMTP_FROM=Your App Name <your_verified_sender@example.com>

   - SMTP_USER = email you use to log in at https://app.brevo.com
   - SMTP_PASS = your Brevo API key (from Brevo: SMTP & API → API Keys). Paste your key (e.g. xkeysib-...).
   - SMTP_FROM = use a sender email you verified in Brevo (Sender & Domains).

Option B: Gmail (often blocked on Railway)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_sender_email@gmail.com
SMTP_PASS=your_app_password
SMTP_FROM=System Name <your_sender_email@gmail.com>

   - For Gmail use an App Password. Get Supabase key in Brave: Dashboard → Settings → API → service_role key.

---
DEPLOYMENT (e.g. Railway) — add these so routing works from your deployed frontend:

BACKEND_URL=https://your-backend.railway.app
   - Public URL of this backend (Railway gives you this).
   - Used in emails/links and startup logs.

FRONTEND_URL=https://your-frontend.railway.app
   - Public URL of your frontend (or Vercel/Netlify URL).
   - Backend allows CORS from this origin and uses it in password-reset links.

CORS_ORIGIN=https://your-frontend.railway.app
   - Optional. Comma-separated list of allowed origins if you have multiple frontend URLs.
   - If you set FRONTEND_URL, it is automatically allowed; use CORS_ORIGIN for extra origins.

Frontend: when building for production, set VITE_API_URL to your backend URL so all API calls go to the right place, e.g.:
   VITE_API_URL=https://your-backend.railway.app npm run build
   (Or set VITE_API_URL in your frontend host's environment and build there.)
